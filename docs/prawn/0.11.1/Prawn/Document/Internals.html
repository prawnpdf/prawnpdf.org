<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Module: Prawn::Document::Internals</title>

	<link rel="stylesheet" href="../../rdoc.css" type="text/css" media="screen" />

	<script src="../../js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="module">

	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../../index.html">Home</a>
          <a href="../../index.html#classes">Classes</a>
          <a href="../../index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="../../lib/prawn/document/internals_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/prawn/document/internals.rb">lib/prawn/document/internals.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			

			<!-- Namespace Contents -->
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#method-i-add_content">#add_content</a></li>
					
					<li><a href="#method-i-before_render">#before_render</a></li>
					
					<li><a href="#method-i-deref">#deref</a></li>
					
					<li><a href="#method-i-finalize_all_page_contents">#finalize_all_page_contents</a></li>
					
					<li><a href="#method-i-fresh_content_streams">#fresh_content_streams</a></li>
					
					<li><a href="#method-i-min_version">#min_version</a></li>
					
					<li><a href="#method-i-names">#names</a></li>
					
					<li><a href="#method-i-names%3F">#names?</a></li>
					
					<li><a href="#method-i-on_page_create">#on_page_create</a></li>
					
					<li><a href="#method-i-ref">#ref</a></li>
					
					<li><a href="#method-i-ref%21">#ref!</a></li>
					
					<li><a href="#method-i-render_body">#render_body</a></li>
					
					<li><a href="#method-i-render_header">#render_header</a></li>
					
					<li><a href="#method-i-render_trailer">#render_trailer</a></li>
					
					<li><a href="#method-i-render_xref">#render_xref</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="../../COPYING.html">COPYING</a></li>
				
					<li class="file"><a href="../../HACKING.html">HACKING</a></li>
				
					<li class="file"><a href="../../LICENSE.html">LICENSE</a></li>
				
					<li class="file"><a href="../../README.html">README</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="../../images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="../../Prawn/Core/Page/GraphicsState.html">Prawn::Core::Page::GraphicsState</a></li>
				
					<li><a href="../../Prawn/Document.html">Prawn::Document</a></li>
				
					<li><a href="../../Prawn/Document/BoundingBox.html">Prawn::Document::BoundingBox</a></li>
				
					<li><a href="../../Prawn/Document/ColumnBox.html">Prawn::Document::ColumnBox</a></li>
				
					<li><a href="../../Prawn/Document/GraphicsState.html">Prawn::Document::GraphicsState</a></li>
				
					<li><a href="../../Prawn/Document/Grid.html">Prawn::Document::Grid</a></li>
				
					<li><a href="../../Prawn/Document/Internals.html">Prawn::Document::Internals</a></li>
				
					<li><a href="../../Prawn/Document/PageGeometry.html">Prawn::Document::PageGeometry</a></li>
				
					<li><a href="../../Prawn/Document/Security.html">Prawn::Document::Security</a></li>
				
					<li><a href="../../Prawn/Document/Snapshot.html">Prawn::Document::Snapshot</a></li>
				
					<li><a href="../../Prawn/Encoding.html">Prawn::Encoding</a></li>
				
					<li><a href="../../Prawn/Errors.html">Prawn::Errors</a></li>
				
					<li><a href="../../Prawn/Font.html">Prawn::Font</a></li>
				
					<li><a href="../../Prawn/Font/AFM.html">Prawn::Font::AFM</a></li>
				
					<li><a href="../../Prawn/Font/DFont.html">Prawn::Font::DFont</a></li>
				
					<li><a href="../../Prawn/Font/TTF.html">Prawn::Font::TTF</a></li>
				
					<li><a href="../../Prawn/GraphicState.html">Prawn::GraphicState</a></li>
				
					<li><a href="../../Prawn/GraphicStateStack.html">Prawn::GraphicStateStack</a></li>
				
					<li><a href="../../Prawn/Graphics.html">Prawn::Graphics</a></li>
				
					<li><a href="../../Prawn/Graphics/CapStyle.html">Prawn::Graphics::CapStyle</a></li>
				
					<li><a href="../../Prawn/Graphics/Color.html">Prawn::Graphics::Color</a></li>
				
					<li><a href="../../Prawn/Graphics/Dash.html">Prawn::Graphics::Dash</a></li>
				
					<li><a href="../../Prawn/Graphics/Gradient.html">Prawn::Graphics::Gradient</a></li>
				
					<li><a href="../../Prawn/Graphics/JoinStyle.html">Prawn::Graphics::JoinStyle</a></li>
				
					<li><a href="../../Prawn/Graphics/Transformation.html">Prawn::Graphics::Transformation</a></li>
				
					<li><a href="../../Prawn/Graphics/Transparency.html">Prawn::Graphics::Transparency</a></li>
				
					<li><a href="../../Prawn/Images.html">Prawn::Images</a></li>
				
					<li><a href="../../Prawn/Images/JPG.html">Prawn::Images::JPG</a></li>
				
					<li><a href="../../Prawn/Images/PNG.html">Prawn::Images::PNG</a></li>
				
					<li><a href="../../Prawn/Layout.html">Prawn::Layout</a></li>
				
					<li><a href="../../Prawn/Measurements.html">Prawn::Measurements</a></li>
				
					<li><a href="../../Prawn/Outline.html">Prawn::Outline</a></li>
				
					<li><a href="../../Prawn/Stamp.html">Prawn::Stamp</a></li>
				
					<li><a href="../../Prawn/Table.html">Prawn::Table</a></li>
				
					<li><a href="../../Prawn/Table/Cell.html">Prawn::Table::Cell</a></li>
				
					<li><a href="../../Prawn/Table/Cell/InTable.html">Prawn::Table::Cell::InTable</a></li>
				
					<li><a href="../../Prawn/Table/Cell/Subtable.html">Prawn::Table::Cell::Subtable</a></li>
				
					<li><a href="../../Prawn/Table/Cell/Text.html">Prawn::Table::Cell::Text</a></li>
				
					<li><a href="../../Prawn/Table/Cells.html">Prawn::Table::Cells</a></li>
				
					<li><a href="../../Prawn/Text.html">Prawn::Text</a></li>
				
					<li><a href="../../Prawn/Text/Box.html">Prawn::Text::Box</a></li>
				
					<li><a href="../../Prawn/Text/Formatted.html">Prawn::Text::Formatted</a></li>
				
					<li><a href="../../Prawn/Text/Formatted/Box.html">Prawn::Text::Formatted::Box</a></li>
				
					<li><a href="../../Prawn/Text/Formatted/Fragment.html">Prawn::Text::Formatted::Fragment</a></li>
				
					<li><a href="../../Prawn/Text/Formatted/Parser.html">Prawn::Text::Formatted::Parser</a></li>
				
					<li><a href="../../Arcfour.html">Arcfour</a></li>
				
					<li><a href="../../Numeric.html">Numeric</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="module">Prawn::Document::Internals</h1>

		<div id="description">
			<p>
This module exposes a few low-level PDF features for those who want to
extend Prawn&#8217;s core functionality.  If you are not comfortable with
low level PDF functionality as defined by Adobe&#8217;s specification,
chances are you won&#8217;t need anything you find here.  
</p>

		</div>

		<!-- Constants -->
		

		<!-- Attributes -->
		

		<!-- Methods -->
		
		<div id="public-instance-method-details" class="method-section section">
			<h3 class="section-header">Public Instance Methods</h3>

		
			<div id="add-content-method" class="method-detail ">
				<a name="method-i-add_content"></a>

				<div class="method-heading">
				
					<span class="method-name">add_content</span><span
						class="method-args">(str)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Appends a raw string to the current page content.
</p>
<pre>
                              
 # Raw line drawing example:           
 x1,y1,x2,y2 = 100,500,300,550
 pdf.add_content(&quot;%.3f %.3f m&quot; % [ x1, y1 ])  # move 
 pdf.add_content(&quot;%.3f %.3f l&quot; % [ x2, y2 ])  # draw path
 pdf.add_content(&quot;S&quot;) # stroke                    </pre>
					

					
					<div class="method-source-code"
						id="add-content-source">
<pre>
    <span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 56</span>
56:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_content</span>(<span class="ruby-identifier">str</span>)
57:         <span class="ruby-identifier">save_graphics_state</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">graphic_state</span>.<span class="ruby-identifier">nil?</span>
58:         <span class="ruby-identifier">state</span>.<span class="ruby-identifier">page</span>.<span class="ruby-identifier">content</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
59:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="before-render-method" class="method-detail ">
				<a name="method-i-before_render"></a>

				<div class="method-heading">
				
					<span class="method-name">before_render</span><span
						class="method-args">(&block)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Defines a block to be called just before the document is rendered.
</p>
					

					
					<div class="method-source-code"
						id="before-render-source">
<pre>
    <span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 77</span>
77:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">before_render</span>(&amp;<span class="ruby-identifier">block</span>)
78:         <span class="ruby-identifier">state</span>.<span class="ruby-identifier">before_render_callbacks</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">block</span>
79:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="deref-method" class="method-detail ">
				<a name="method-i-deref"></a>

				<div class="method-heading">
				
					<span class="method-name">deref</span><span
						class="method-args">(obj)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
At any stage in the object tree an object can be replaced with an indirect
reference. To get access to the object safely, regardless of if it&#8217;s
hidden behind a Prawn::Reference, wrap it in deref().
</p>
					

					
					<div class="method-source-code"
						id="deref-source">
<pre>
    <span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 44</span>
44:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">deref</span>(<span class="ruby-identifier">obj</span>)
45:         <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Prawn</span><span class="ruby-operator">::</span><span class="ruby-constant">Core</span><span class="ruby-operator">::</span><span class="ruby-constant">Reference</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">data</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">obj</span>
46:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="names-method" class="method-detail ">
				<a name="method-i-names"></a>

				<div class="method-heading">
				
					<span class="method-name">names</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
The Name dictionary (PDF spec 3.6.3) for this document. It is lazily
initialized, so that documents that do not need a name dictionary do not
incur the additional overhead.
</p>
					

					
					<div class="method-source-code"
						id="names-source">
<pre>
    <span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 65</span>
65:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">names</span>
66:         <span class="ruby-identifier">state</span>.<span class="ruby-identifier">store</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">data</span>[<span class="ruby-value">:Names</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">ref!</span>(<span class="ruby-value">:Type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:Names</span>)
67:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="names--method" class="method-detail ">
				<a name="method-i-names%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">names?</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns true if the Names dictionary is in use for this document.
</p>
					

					
					<div class="method-source-code"
						id="names--source">
<pre>
    <span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 71</span>
71:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">names?</span>
72:         <span class="ruby-identifier">state</span>.<span class="ruby-identifier">store</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">data</span>[<span class="ruby-value">:Names</span>]
73:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="on-page-create-method" class="method-detail ">
				<a name="method-i-on_page_create"></a>

				<div class="method-heading">
				
					<span class="method-name">on_page_create</span><span
						class="method-args">(&block)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Defines a block to be called just before a new page is started.
</p>
					

					
					<div class="method-source-code"
						id="on-page-create-source">
<pre>
    <span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 83</span>
83:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">on_page_create</span>(&amp;<span class="ruby-identifier">block</span>)
84:          <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
85:             <span class="ruby-identifier">state</span>.<span class="ruby-identifier">on_page_create_callback</span> = <span class="ruby-identifier">block</span>
86:          <span class="ruby-keyword kw">else</span>
87:             <span class="ruby-identifier">state</span>.<span class="ruby-identifier">on_page_create_callback</span> = <span class="ruby-keyword kw">nil</span>
88:          <span class="ruby-keyword kw">end</span>
89:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="ref-method" class="method-detail ">
				<a name="method-i-ref"></a>

				<div class="method-heading">
				
					<span class="method-name">ref</span><span
						class="method-args">(data)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Creates a new Prawn::Reference and adds it to the Document&#8217;s object
list.  The <tt>data</tt> argument is anything that Prawn::PdfObject() can
convert. 
</p>
<p>
Returns the identifier which points to the reference in the ObjectStore   
</p>
					

					
					<div class="method-source-code"
						id="ref-source">
<pre>
    <span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 24</span>
24:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ref</span>(<span class="ruby-identifier">data</span>)
25:         <span class="ruby-identifier">ref!</span>(<span class="ruby-identifier">data</span>).<span class="ruby-identifier">identifier</span>
26:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="ref--method" class="method-detail ">
				<a name="method-i-ref%21"></a>

				<div class="method-heading">
				
					<span class="method-name">ref!</span><span
						class="method-args">(data)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Like ref, but returns the actual reference instead of its identifier.
</p>
<p>
While you can use this to build up nested references within the object
tree, it is recommended to persist only identifiers, and them provide
helper methods to look up the actual references in the ObjectStore if
needed.  If you take this approach, <a
href="Snapshot.html">Prawn::Document::Snapshot</a> will probably work with
your extension
</p>
					

					
					<div class="method-source-code"
						id="ref--source">
<pre>
    <span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 36</span>
36:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ref!</span>(<span class="ruby-identifier">data</span>)
37:         <span class="ruby-identifier">state</span>.<span class="ruby-identifier">store</span>.<span class="ruby-identifier">ref</span>(<span class="ruby-identifier">data</span>)
38:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	
		<div id="private-instance-method-details" class="method-section section">
			<h3 class="section-header">Private Instance Methods</h3>

		
			<div id="finalize-all-page-contents-method" class="method-detail ">
				<a name="method-i-finalize_all_page_contents"></a>

				<div class="method-heading">
				
					<span class="method-name">finalize_all_page_contents</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="finalize-all-page-contents-source">
<pre>
     <span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 105</span>
105:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">finalize_all_page_contents</span>
106:         (<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">page_count</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
107:           <span class="ruby-identifier">go_to_page</span> <span class="ruby-identifier">i</span>
108:           <span class="ruby-identifier">repeaters</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">run</span>(<span class="ruby-identifier">i</span>) }
109:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">graphic_stack</span>.<span class="ruby-identifier">present?</span>
110:             <span class="ruby-identifier">restore_graphics_state</span>
111:           <span class="ruby-keyword kw">end</span>
112:           <span class="ruby-identifier">state</span>.<span class="ruby-identifier">page</span>.<span class="ruby-identifier">finalize</span>
113:         <span class="ruby-keyword kw">end</span>
114:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="fresh-content-streams-method" class="method-detail ">
				<a name="method-i-fresh_content_streams"></a>

				<div class="method-heading">
				
					<span class="method-name">fresh_content_streams</span><span
						class="method-args">(options={})</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
adds a new, empty content stream to each page. Used in templating so that
imported content streams can be left pristine
</p>
					

					
					<div class="method-source-code"
						id="fresh-content-streams-source">
<pre>
     <span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 96</span>
 96:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fresh_content_streams</span>(<span class="ruby-identifier">options</span>={})
 97:         (<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">page_count</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
 98:           <span class="ruby-identifier">go_to_page</span> <span class="ruby-identifier">i</span>
 99:           <span class="ruby-identifier">state</span>.<span class="ruby-identifier">page</span>.<span class="ruby-identifier">new_content_stream</span>
100:           <span class="ruby-identifier">apply_margin_options</span>(<span class="ruby-identifier">options</span>)
101:           <span class="ruby-identifier">use_graphic_settings</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:template</span>])
102:         <span class="ruby-keyword kw">end</span>
103:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="min-version-method" class="method-detail ">
				<a name="method-i-min_version"></a>

				<div class="method-heading">
				
					<span class="method-name">min_version</span><span
						class="method-args">(min)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
raise the PDF version of the file we&#8217;re going to generate. A private
method, designed for internal use when the user adds a feature to their
document that requires a particular version.
</p>
					

					
					<div class="method-source-code"
						id="min-version-source">
<pre>
     <span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 120</span>
120:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">min_version</span>(<span class="ruby-identifier">min</span>)
121:         <span class="ruby-identifier">state</span>.<span class="ruby-identifier">version</span> = <span class="ruby-identifier">min</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">min</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">state</span>.<span class="ruby-identifier">version</span>
122:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="render-body-method" class="method-detail ">
				<a name="method-i-render_body"></a>

				<div class="method-heading">
				
					<span class="method-name">render_body</span><span
						class="method-args">(output)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Write out the PDF Body, as per spec 3.4.2
</p>
					

					
					<div class="method-source-code"
						id="render-body-source">
<pre>
     <span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 138</span>
138:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">render_body</span>(<span class="ruby-identifier">output</span>)
139:         <span class="ruby-identifier">state</span>.<span class="ruby-identifier">render_body</span>(<span class="ruby-identifier">output</span>)
140:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="render-header-method" class="method-detail ">
				<a name="method-i-render_header"></a>

				<div class="method-heading">
				
					<span class="method-name">render_header</span><span
						class="method-args">(output)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Write out the PDF Header, as per spec 3.4.1
</p>
					

					
					<div class="method-source-code"
						id="render-header-source">
<pre>
     <span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 126</span>
126:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">render_header</span>(<span class="ruby-identifier">output</span>)
127:         <span class="ruby-identifier">state</span>.<span class="ruby-identifier">before_render_actions</span>(<span class="ruby-keyword kw">self</span>)
128: 
129:         <span class="ruby-comment cmt"># pdf version</span>
130:         <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;%PDF-#{state.version}\n&quot;</span>
131: 
132:         <span class="ruby-comment cmt"># 4 binary chars, as recommended by the spec</span>
133:         <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;%\xFF\xFF\xFF\xFF\n&quot;</span>
134:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="render-trailer-method" class="method-detail ">
				<a name="method-i-render_trailer"></a>

				<div class="method-heading">
				
					<span class="method-name">render_trailer</span><span
						class="method-args">(output)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Write out the PDF Trailer, as per spec 3.4.4
</p>
					

					
					<div class="method-source-code"
						id="render-trailer-source">
<pre>
     <span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 157</span>
157:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">render_trailer</span>(<span class="ruby-identifier">output</span>)
158:         <span class="ruby-identifier">trailer_hash</span> = {<span class="ruby-value">:Size</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">state</span>.<span class="ruby-identifier">store</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, 
159:                         <span class="ruby-value">:Root</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">state</span>.<span class="ruby-identifier">store</span>.<span class="ruby-identifier">root</span>,
160:                         <span class="ruby-value">:Info</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">state</span>.<span class="ruby-identifier">store</span>.<span class="ruby-identifier">info</span>}
161:         <span class="ruby-identifier">trailer_hash</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">state</span>.<span class="ruby-identifier">trailer</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">state</span>.<span class="ruby-identifier">trailer</span>
162: 
163:         <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;trailer\n&quot;</span>
164:         <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Prawn</span><span class="ruby-operator">::</span><span class="ruby-constant">Core</span><span class="ruby-operator">::</span><span class="ruby-constant">PdfObject</span>(<span class="ruby-identifier">trailer_hash</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
165:         <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;startxref\n&quot;</span> 
166:         <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@xref_offset</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
167:         <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;%%EOF&quot;</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
168:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="render-xref-method" class="method-detail ">
				<a name="method-i-render_xref"></a>

				<div class="method-heading">
				
					<span class="method-name">render_xref</span><span
						class="method-args">(output)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Write out the PDF Cross Reference <a href="../Table.html">Table</a>, as per
spec 3.4.3
</p>
					

					
					<div class="method-source-code"
						id="render-xref-source">
<pre>
     <span class="ruby-comment cmt"># File lib/prawn/document/internals.rb, line 144</span>
144:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">render_xref</span>(<span class="ruby-identifier">output</span>)
145:         <span class="ruby-ivar">@xref_offset</span> = <span class="ruby-identifier">output</span>.<span class="ruby-identifier">size</span>
146:         <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;xref\n&quot;</span>
147:         <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;0 #{state.store.size + 1}\n&quot;</span>
148:         <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;0000000000 65535 f \n&quot;</span>
149:         <span class="ruby-identifier">state</span>.<span class="ruby-identifier">store</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ref</span><span class="ruby-operator">|</span>
150:           <span class="ruby-identifier">output</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-value str">&quot;%010d&quot;</span>, <span class="ruby-identifier">ref</span>.<span class="ruby-identifier">offset</span>)
151:           <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; 00000 n \n&quot;</span>
152:         <span class="ruby-keyword kw">end</span>
153:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

